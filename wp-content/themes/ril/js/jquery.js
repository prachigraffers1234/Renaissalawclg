/* jQuery Form Styler v1.3.4 | (c) Dimox | http://dimox.name/jquery-form-styler/ */
(function(e){e.fn.styler=function(t){t=e.extend({idSuffix:"-styler",browseText:"???????",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0},t);return this.each(function(){var r=e(this),i="",s="",o="";void 0!==r.attr("id")&&""!=r.attr("id")&&(i=' id="'+r.attr("id")+t.idSuffix+'"');void 0!==r.attr("class")&&""!=r.attr("class")&&(s=" "+r.attr("class"));var u=r.data(),a;for(a in u)""!=u[a]&&(o+=" data-"+a+'="'+u[a]+'"');i+=o;r.is(":checkbox")?r.css({position:"absolute",left:-9999}).each(function(){if(1>r.next("div.jq-checkbox").length){var t=e("<div"+i+' class="jq-checkbox'+s+'" style="display: inline-block"><div></div></div>');r.after(t);r.is(":checked")&&t.addClass("checked");r.is(":disabled")&&t.addClass("disabled");t.click(function(){if(!t.is(".disabled"))return r.is(":checked")?(r.prop("checked",!1),t.removeClass("checked")):(r.prop("checked",!0),t.addClass("checked")),r.change(),!1});r.parent("label").add('label[for="'+r.attr("id")+'"]').click(function(e){t.click();e.preventDefault()});r.change(function(){r.is(":checked")?t.addClass("checked"):t.removeClass("checked")}).keydown(function(e){r.parent("label").length&&(13==e.which||32==e.which)&&t.click()}).focus(function(){t.is(".disabled")||t.addClass("focused")}).blur(function(){t.removeClass("focused")});r.on("refresh",function(){r.is(":checked")?t.addClass("checked"):t.removeClass("checked");r.is(":disabled")?t.addClass("disabled"):t.removeClass("disabled")})}}):r.is(":radio")?r.css({position:"absolute",left:-9999}).each(function(){if(1>r.next("div.jq-radio").length){var t=e("<div"+i+' class="jq-radio'+s+'" style="display: inline-block"><div></div></div>');r.after(t);r.is(":checked")&&t.addClass("checked");r.is(":disabled")&&t.addClass("disabled");t.click(function(){if(!t.is(".disabled"))return e('input[name="'+r.attr("name")+'"]').prop("checked",!1).next().removeClass("checked"),r.prop("checked",!0).next().addClass("checked"),r.change(),!1});r.parent("label").add('label[for="'+r.attr("id")+'"]').click(function(e){t.click();e.preventDefault()});r.change(function(){e('input[name="'+r.attr("name")+'"]').next().removeClass("checked");r.next().addClass("checked")}).focus(function(){t.is(".disabled")||t.addClass("focused")}).blur(function(){t.removeClass("focused")});r.on("refresh",function(){r.is(":checked")?(e('input[name="'+r.attr("name")+'"]').next().removeClass("checked"),t.addClass("checked")):t.removeClass("checked");r.is(":disabled")?t.addClass("disabled"):t.removeClass("disabled")})}}):r.is(":file")?r.css({position:"absolute",top:"-50%",right:"-50%",fontSize:"200px",opacity:0}).each(function(){if(1>r.parent("div.jq-file").length){var o=e("<div"+i+' class="jq-file'+s+'" style="display: inline-block; position: relative; overflow: hidden"></div>'),u=e('<div class="name" style="float: left; white-space: nowrap"></div>').appendTo(o);e('<div class="browse" style="float: left">'+t.browseText+"</div>").appendTo(o);r.after(o);o.append(r);r.is(":disabled")&&o.addClass("disabled");r.change(function(){u.text(r.val().replace(/.+[\\\/]/,""))}).focus(function(){o.addClass("focused")}).blur(function(){o.removeClass("focused")}).click(function(){o.removeClass("focused")}).on("refresh",function(){r.is(":disabled")?o.addClass("disabled"):o.removeClass("disabled")})}}):r.is("select")&&r.each(function(){if(1>r.next("div.jqselect").length){var o=function(){function o(t){t.bind("mousewheel DOMMouseScroll",function(t){var n=null;"mousewheel"==t.type?n=-1*t.originalEvent.wheelDelta:"DOMMouseScroll"==t.type&&(n=40*t.originalEvent.detail);n&&(t.preventDefault(),e(this).scrollTop(n+e(this).scrollTop()))})}function u(){for(a=0;a<f.length;a++){var e="",t="",n="",r="";f.eq(a).prop("selected")&&(t="selected sel");f.eq(a).is(":disabled")&&(t="disabled");f.eq(a).is(":selected:disabled")&&(t="selected sel disabled");void 0!==f.eq(a).attr("class")&&(n=" "+f.eq(a).attr("class"));e='<li class="'+t+n+'">'+f.eq(a).text()+"</li>";f.eq(a).parent().is("optgroup")&&(void 0!==f.eq(a).parent().attr("class")&&(r=" "+f.eq(a).parent().attr("class")),e='<li class="'+t+n+" option"+r+'">'+f.eq(a).text()+"</li>",f.eq(a).is(":first-child")&&(e='<li class="optgroup'+r+'">'+f.eq(a).parent().attr("label")+"</li>"+e));c+=e}}var f=e("option",r),c="";if(r.is("[multiple]")){var h=e("<div"+i+' class="jq-select-multiple jqselect'+s+'"></div>');r.after(h).css({position:"absolute",left:-9999});u();h.append('<ul style="position:relative;">'+c+"</ul>");var p=e("ul",h),v=e("li",h).attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none"}),m=r.attr("size"),g=p.outerHeight(),y=v.outerHeight();void 0!==m&&0<m?p.css({height:y*m}):p.css({height:4*y});g>h.height()&&(p.css("overflowY","scroll"),o(p),v.filter(".selected").length&&p.scrollTop(p.scrollTop()+v.filter(".selected").position().top));r.is(":disabled")?(h.addClass("disabled"),f.each(function(){e(this).is(":selected")&&v.eq(e(this).index()).addClass("selected")})):(v.filter(":not(.disabled):not(.optgroup)").click(function(t){r.focus();h.removeClass("focused");var n=e(this);t.ctrlKey||n.addClass("selected");t.shiftKey||n.addClass("first");!t.ctrlKey&&!t.shiftKey&&n.siblings().removeClass("selected first");t.ctrlKey&&(n.is(".selected")?n.removeClass("selected first"):n.addClass("selected first"),n.siblings().removeClass("first"));if(t.shiftKey){var i=!1,s=!1;n.siblings().removeClass("selected").siblings(".first").addClass("selected");n.prevAll().each(function(){e(this).is(".first")&&(i=!0)});n.nextAll().each(function(){e(this).is(".first")&&(s=!0)});i&&n.prevAll().each(function(){if(e(this).is(".selected"))return!1;e(this).not(".disabled, .optgroup").addClass("selected")});s&&n.nextAll().each(function(){if(e(this).is(".selected"))return!1;e(this).not(".disabled, .optgroup").addClass("selected")});1==v.filter(".selected").length&&n.addClass("first")}f.prop("selected",!1);v.filter(".selected").each(function(){var t=e(this),n=t.index();t.is(".option")&&(n-=t.prevAll(".optgroup").length);f.eq(n).prop("selected",!0)});r.change()}),f.each(function(t){e(this).data("optionIndex",t)}),r.change(function(){v.removeClass("selected");var t=[];f.filter(":selected").each(function(){t.push(e(this).data("optionIndex"))});v.not(".optgroup").filter(function(n){return-1<e.inArray(n,t)}).addClass("selected")}).focus(function(){h.addClass("focused")}).blur(function(){h.removeClass("focused")}),g>h.height()&&r.keydown(function(e){(38==e.which||37==e.which||33==e.which)&&p.scrollTop(p.scrollTop()+v.filter(".selected").position().top-y);(40==e.which||39==e.which||34==e.which)&&p.scrollTop(p.scrollTop()+v.filter(".selected:last").position().top-p.innerHeight()+2*y)}))}else{var b=e("<div"+i+' class="jq-selectbox"><div class="select"><div class="text"></div><b class="trigger"><i class="arrow"></i></b></div></div>');r.after(b).css({position:"absolute",left:-9999});var m=e("div.select",b),w=e("div.text",b),g=f.filter(":selected");g.length?w.text(g.text()):w.text(f.first().text());if(r.is(":disabled"))b.addClass("disabled");else{u();var E=e('<div class="dropdown"><ul>'+c+"</ul></div>");b.append(E);var S=e("li",E);1>S.filter(".selected").length&&S.first().addClass("selected sel");var x=b.outerHeight();"auto"==E.css("")&&E.css({left:0});"auto"==E.css("")&&E.css({top:x});var T=S.outerHeight(),N=E.css("");E.hide();m.click(function(){r.focus();if(t.selectSmartPositioning){var i=e(window),s=b.offset().top,u=i.height()-x-(s-i.scrollTop()),a=t.selectVisibleOptions,f=6*T,l=T*a;0<a&&6>a&&(f=l);0>u||u<f?(E.height("").css({top:"",bottom:N}),E.outerHeight()>s-i.scrollTop()-20&&(E.height(Math.floor((s-i.scrollTop()-20)/T)*T),0<a&&6>a?E.height()>f&&E.height(f):6<a&&E.height()>l&&E.height(l))):u>f&&(E.height("").css({bottom:"",top:N}),E.outerHeight()>u-20&&(E.height(Math.floor((u-20)/T)*T),0<a&&6>a?E.height()>f&&E.height(f):6<a&&E.height()>l&&E.height(l)))}e("div.jqselect").css({}).removeClass("focused");b.css({});E.is(":hidden")?(e("div.dropdown:visible").hide(),E.show(),b.addClass("opened")):(E.hide(),b.removeClass("opened"));S.filter(".selected").length&&E.scrollTop(E.scrollTop()+S.filter(".selected").position().top-E.innerHeight()/2+T/2);o(E);return!1});S.hover(function(){e(this).siblings().removeClass("selected")});var C=S.filter(".selected").text();S.filter(":not(.disabled):not(.optgroup)").click(function(){var t=e(this),n=t.text();if(C!=n){var i=t.index();t.is(".option")&&(i-=t.prevAll(".optgroup").length);t.addClass("selected sel").siblings().removeClass("selected sel");f.prop("selected",!1).eq(i).prop("selected",!0);C=n;w.text(n);r.change()}E.hide()});E.mouseout(function(){e("li.sel",E).addClass("selected")});r.change(function(){w.text(f.filter(":selected").text());S.removeClass("selected sel").not(".optgroup").eq(r[0].selectedIndex).addClass("selected sel")}).focus(function(){b.addClass("focused")}).blur(function(){b.removeClass("focused")}).bind("keydown keyup",function(e){w.text(f.filter(":selected").text());S.removeClass("selected sel").not(".optgroup").eq(r[0].selectedIndex).addClass("selected sel");(38==e.which||37==e.which||33==e.which)&&E.scrollTop(E.scrollTop()+S.filter(".selected").position().top);(40==e.which||39==e.which||34==e.which)&&E.scrollTop(E.scrollTop()+S.filter(".selected").position().top-E.innerHeight()+T);13==e.which&&E.hide()});e(document).on("click",function(t){!e(t.target).parents().hasClass("selectbox")&&"OPTION"!=t.target.nodeName&&(E.hide().find("li.sel").addClass("selected"),b.removeClass("focused opened"))})}}};o();r.on("refresh",function(){r.next().remove();o()})}})})}})(jQuery)